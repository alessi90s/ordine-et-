<!DOCTYPE html>
<html>
<head>
    <title>Ordinatore di Età Semplificato</title>
</head>
<body>
    <h1>Ordinatore di Età Semplificato</h1>
    <textarea id="inputText" rows="20" cols="80" placeholder="Inserisci il testo qui..."></textarea><br><br>
    <button onclick="sortText()">Ordina per Età</button>
    <h2>Testo Ordinato</h2>
    <textarea id="outputText" rows="20" cols="80" readonly></textarea>
    <script>
        function sortText() {
            var inputText = document.getElementById("inputText").value;
            var blocks = [];
            var regex = /(Età.*?)(?=Età|$)/gs;
            var match;
            while ((match = regex.exec(inputText)) !== null) {
                var block = match[1];
                // Estrae l'età dal blocco
                var age = extractAge(block);
                blocks.push({age: age, text: block});
            }
            // Ordina i blocchi in base all'età
            blocks.sort(function(a, b) {
                return a.age - b.age;
            });
            // Combina i blocchi ordinati
            var outputText = blocks.map(function(block) {
                return block.text.trim();
            }).join("\n\n");
            // Mostra il testo ordinato
            document.getElementById("outputText").value = outputText;
        }

        function extractAge(text) {
            // Prende il testo dopo "Età"
            var ageText = text.substring(text.indexOf('Età') + 3);
            // Trova il primo numero di una o due cifre
            var ageMatch = ageText.match(/\b(\d{1,2})\b/);
            if (ageMatch) {
                return parseInt(ageMatch[1]);
            } else {
                // Se non trova un numero valido, assegna Infinity per posizionarlo alla fine
                return Infinity;
            }
        }
    </script>
</body>
</html>
